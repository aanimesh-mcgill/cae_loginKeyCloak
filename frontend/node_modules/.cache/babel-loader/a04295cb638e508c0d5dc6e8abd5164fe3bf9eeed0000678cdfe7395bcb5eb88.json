{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aanime\\\\cae_login\\\\frontend\\\\src\\\\components\\\\ProtectedRoute.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  requiredRole,\n  requiredPermission\n}) => {\n  _s();\n  const {\n    user,\n    loading,\n    hasRole,\n    hasPermission,\n    isAuthenticated\n  } = useAuth();\n  const location = useLocation();\n  console.log('ProtectedRoute:', {\n    path: location.pathname,\n    isAuthenticated,\n    user,\n    loading,\n    requiredRole,\n    hasRole: requiredRole ? hasRole(requiredRole) : undefined\n  });\n  debugger;\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        fontSize: '18px'\n      },\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 7\n    }, this);\n  }\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Not authenticated (debug mode, login page should be accessible)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 12\n    }, this);\n  }\n  if (requiredRole && !hasRole(requiredRole)) {\n    var _user$realm_access, _user$realm_access$ro;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        flexDirection: 'column',\n        gap: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Access Denied\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"You don't have the required role to access this page.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Required role: \", requiredRole]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Your roles: \", user === null || user === void 0 ? void 0 : (_user$realm_access = user.realm_access) === null || _user$realm_access === void 0 ? void 0 : (_user$realm_access$ro = _user$realm_access.roles) === null || _user$realm_access$ro === void 0 ? void 0 : _user$realm_access$ro.join(', ')]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.history.back(),\n        children: \"Go Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this);\n  }\n  if (requiredPermission && !hasPermission(requiredPermission)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        flexDirection: 'column',\n        gap: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Access Denied\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"You don't have the required permission to access this page.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Required permission: \", requiredPermission]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.history.back(),\n        children: \"Go Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this);\n  }\n  return children;\n};\n_s(ProtectedRoute, \"ysGUUCOoWK5YHAst6O2YpxfS6aI=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","jsxDEV","_jsxDEV","ProtectedRoute","children","requiredRole","requiredPermission","_s","user","loading","hasRole","hasPermission","isAuthenticated","location","console","log","path","pathname","undefined","style","display","justifyContent","alignItems","height","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","_user$realm_access","_user$realm_access$ro","flexDirection","gap","realm_access","roles","join","onClick","window","history","back","_c","$RefreshReg$"],"sources":["C:/Users/aanime/cae_login/frontend/src/components/ProtectedRoute.js"],"sourcesContent":["import React from 'react';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nconst ProtectedRoute = ({ children, requiredRole, requiredPermission }) => {\r\n  const { user, loading, hasRole, hasPermission, isAuthenticated } = useAuth();\r\n  const location = useLocation();\r\n\r\n  console.log('ProtectedRoute:', {\r\n    path: location.pathname,\r\n    isAuthenticated,\r\n    user,\r\n    loading,\r\n    requiredRole,\r\n    hasRole: requiredRole ? hasRole(requiredRole) : undefined\r\n  });\r\n  debugger;\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ \r\n        display: 'flex', \r\n        justifyContent: 'center', \r\n        alignItems: 'center', \r\n        height: '100vh',\r\n        fontSize: '18px'\r\n      }}>\r\n        Loading...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!isAuthenticated) {\r\n    return <div>Not authenticated (debug mode, login page should be accessible)</div>;\r\n  }\r\n\r\n  if (requiredRole && !hasRole(requiredRole)) {\r\n    return (\r\n      <div style={{ \r\n        display: 'flex', \r\n        justifyContent: 'center', \r\n        alignItems: 'center', \r\n        height: '100vh',\r\n        flexDirection: 'column',\r\n        gap: '20px'\r\n      }}>\r\n        <h2>Access Denied</h2>\r\n        <p>You don't have the required role to access this page.</p>\r\n        <p>Required role: {requiredRole}</p>\r\n        <p>Your roles: {user?.realm_access?.roles?.join(', ')}</p>\r\n        <button onClick={() => window.history.back()}>Go Back</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (requiredPermission && !hasPermission(requiredPermission)) {\r\n    return (\r\n      <div style={{ \r\n        display: 'flex', \r\n        justifyContent: 'center', \r\n        alignItems: 'center', \r\n        height: '100vh',\r\n        flexDirection: 'column',\r\n        gap: '20px'\r\n      }}>\r\n        <h2>Access Denied</h2>\r\n        <p>You don't have the required permission to access this page.</p>\r\n        <p>Required permission: {requiredPermission}</p>\r\n        <button onClick={() => window.history.back()}>Go Back</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute; "],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AACxD,SAASC,OAAO,QAAQ,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElD,MAAMC,cAAc,GAAGA,CAAC;EAAEC,QAAQ;EAAEC,YAAY;EAAEC;AAAmB,CAAC,KAAK;EAAAC,EAAA;EACzE,MAAM;IAAEC,IAAI;IAAEC,OAAO;IAAEC,OAAO;IAAEC,aAAa;IAAEC;EAAgB,CAAC,GAAGZ,OAAO,CAAC,CAAC;EAC5E,MAAMa,QAAQ,GAAGd,WAAW,CAAC,CAAC;EAE9Be,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAE;IAC7BC,IAAI,EAAEH,QAAQ,CAACI,QAAQ;IACvBL,eAAe;IACfJ,IAAI;IACJC,OAAO;IACPJ,YAAY;IACZK,OAAO,EAAEL,YAAY,GAAGK,OAAO,CAACL,YAAY,CAAC,GAAGa;EAClD,CAAC,CAAC;EACF;EAEA,IAAIT,OAAO,EAAE;IACX,oBACEP,OAAA;MAAKiB,KAAK,EAAE;QACVC,OAAO,EAAE,MAAM;QACfC,cAAc,EAAE,QAAQ;QACxBC,UAAU,EAAE,QAAQ;QACpBC,MAAM,EAAE,OAAO;QACfC,QAAQ,EAAE;MACZ,CAAE;MAAApB,QAAA,EAAC;IAEH;MAAAqB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAEV;EAEA,IAAI,CAAChB,eAAe,EAAE;IACpB,oBAAOV,OAAA;MAAAE,QAAA,EAAK;IAA+D;MAAAqB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EACnF;EAEA,IAAIvB,YAAY,IAAI,CAACK,OAAO,CAACL,YAAY,CAAC,EAAE;IAAA,IAAAwB,kBAAA,EAAAC,qBAAA;IAC1C,oBACE5B,OAAA;MAAKiB,KAAK,EAAE;QACVC,OAAO,EAAE,MAAM;QACfC,cAAc,EAAE,QAAQ;QACxBC,UAAU,EAAE,QAAQ;QACpBC,MAAM,EAAE,OAAO;QACfQ,aAAa,EAAE,QAAQ;QACvBC,GAAG,EAAE;MACP,CAAE;MAAA5B,QAAA,gBACAF,OAAA;QAAAE,QAAA,EAAI;MAAa;QAAAqB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACtB1B,OAAA;QAAAE,QAAA,EAAG;MAAqD;QAAAqB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAC5D1B,OAAA;QAAAE,QAAA,GAAG,iBAAe,EAACC,YAAY;MAAA;QAAAoB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACpC1B,OAAA;QAAAE,QAAA,GAAG,cAAY,EAACI,IAAI,aAAJA,IAAI,wBAAAqB,kBAAA,GAAJrB,IAAI,CAAEyB,YAAY,cAAAJ,kBAAA,wBAAAC,qBAAA,GAAlBD,kBAAA,CAAoBK,KAAK,cAAAJ,qBAAA,uBAAzBA,qBAAA,CAA2BK,IAAI,CAAC,IAAI,CAAC;MAAA;QAAAV,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC1D1B,OAAA;QAAQkC,OAAO,EAAEA,CAAA,KAAMC,MAAM,CAACC,OAAO,CAACC,IAAI,CAAC,CAAE;QAAAnC,QAAA,EAAC;MAAO;QAAAqB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3D,CAAC;EAEV;EAEA,IAAItB,kBAAkB,IAAI,CAACK,aAAa,CAACL,kBAAkB,CAAC,EAAE;IAC5D,oBACEJ,OAAA;MAAKiB,KAAK,EAAE;QACVC,OAAO,EAAE,MAAM;QACfC,cAAc,EAAE,QAAQ;QACxBC,UAAU,EAAE,QAAQ;QACpBC,MAAM,EAAE,OAAO;QACfQ,aAAa,EAAE,QAAQ;QACvBC,GAAG,EAAE;MACP,CAAE;MAAA5B,QAAA,gBACAF,OAAA;QAAAE,QAAA,EAAI;MAAa;QAAAqB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACtB1B,OAAA;QAAAE,QAAA,EAAG;MAA2D;QAAAqB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAClE1B,OAAA;QAAAE,QAAA,GAAG,uBAAqB,EAACE,kBAAkB;MAAA;QAAAmB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAChD1B,OAAA;QAAQkC,OAAO,EAAEA,CAAA,KAAMC,MAAM,CAACC,OAAO,CAACC,IAAI,CAAC,CAAE;QAAAnC,QAAA,EAAC;MAAO;QAAAqB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3D,CAAC;EAEV;EAEA,OAAOxB,QAAQ;AACjB,CAAC;AAACG,EAAA,CAtEIJ,cAAc;EAAA,QACiDH,OAAO,EACzDD,WAAW;AAAA;AAAAyC,EAAA,GAFxBrC,cAAc;AAwEpB,eAAeA,cAAc;AAAC,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}